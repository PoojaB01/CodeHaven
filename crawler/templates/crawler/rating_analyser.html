{% extends 'crawler/base.html' %}

{% block content %}
<div class="card">
    <h2 class="page-header">Profile Analysis</h2>
<form method="post">
    {% csrf_token %}
    {{ form.non_field_errors }}
        <table border="0" style="width: 100%;">
        <tr>
            <td colspan="4">
            <div class="fieldWrapper">
            {{ form.user.errors }}
            <label for="{{ form.user.id_for_label }}"></label>
    
            <input type="text" class="form-control"  placeholder="Handle" name="user" maxlength="100" required id="{{ form.user_1.id_for_label }}">

            </div>
            </td>
            <td colspan="1">
                <button type="submit" class="btn btn-outline-info btn-lg" >Submit</button>
            </td>
        </tr>
        </table>
    </br>
</form>
<div id="output">
    <table>
        <tr>
            <td>{{ result.handle }}</td>
            <td>Max. Rating : {{ result.maxRating }} ({{ result.maxRank }})</td>
        </tr>
        <tr>
            <td>{{ result.name }}</td>
            <td>Curr. Rating : {{ result.rating }} ({{ result.rank }})</td>
        </tr>
    </table>
    <br> <br>
    <table>
    <tr>
    <td>
        Minimum Rating Change<br>
        <a href={{ result.min_change.code }}>{{ result.min_change.name }}</a><br>
        {{ result.min_change.change }}<br>
        Rank : {{ result.min_change.rank }}<br>
        {{ result.min_change.oldR }} -> {{ result.min_change.newR }}<br>
    </td>
    <td>
        Maximum Rating Change<br>
        <a href={{ result.max_change.code }}>{{ result.max_change.name }}</a><br>
        {{ result.max_change.change }}<br>
        Rank : {{ result.max_change.rank }}<br>
        {{ result.max_change.oldR }} -> {{ result.max_change.newR }}<br>
    </td>
    </tr>
    <tr>
        <td>
            Number of contests : {{ result.contests }}<br>
            Highest Rank : {{ result.best_rank }}<br>
            Average submissions per week : {{ result.average_sub }}
        </td>
        <td>
            piechart
        </td>
    </tr>
    </table>
    <div> Heat map </div>
    
</div>
</div>
{% endblock %}